{"ast":null,"code":"var _jsxFileName = \"/Users/chrishar/Documents/CODI/Final Project/Siverr/frontend/src/pages/User/AddService/AddService.js\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport { useForm } from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { Container, Row, Col25, InputFormTxt, LabelForm, InputFormSub, ErrorPForm, TextareaForm } from '../../../components/styled/Form.style';\nimport 'react-dropdown/style.css';\nimport Input from '../../../components/Input';\nimport { fetchAllCategoryUser, fetchSubcategoryByCategoryID, createService, emptySubcategory } from '../../../redux/action-creators';\nimport Select from \"../../../components/Select\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function AddService() {\n  _s();\n\n  var _errors$category, _errors$subcategory, _errors$title, _errors$price, _errors$description;\n\n  const dispatch = useDispatch();\n  const {\n    categoryUserDataUser,\n    errorCategoryUser\n  } = useSelector(state => state.fetchAllCategoryUserReducer);\n  const {\n    fetchSubCategoryDataUser,\n    fetchSubCategoryDataUsererror\n  } = useSelector(state => state.fetchAllSubCategoryByCategoryIDUserReducer);\n  const {\n    postService,\n    createServiceError\n  } = useSelector(state => state.createServiceReducer);\n  const [categoryId, setCategoryId] = useState(0);\n  const [subcategoryId, setSubCategoryId] = useState(0);\n  const [subCategoryInput, SetSubCategoryInput] = useState('');\n  const [categoryInput, SetCategoryInput] = useState('');\n  const [disabledCategory, SetdisabledCategory] = useState(true);\n  const [disabledSubCategory, SetdisabledSubCategory] = useState(true);\n  const [fileImage, SetfileImage] = useState([]);\n  const [nameOfPicture, SetnameOfPicture] = useState([]);\n  const schema = yup.object().shape({\n    title: yup.string().required(),\n    category: yup.string(),\n    subcategory: yup.string(),\n    price: yup.string().required(),\n    description: yup.string().required() //   year: yup.number().min(1000,'Minimum Year should be 1000').max(9999,'Maximum Year should be 9999').typeError(\"Must be a number\"),\n    //   rating: yup.number().min(1,'Minimum Rating should be 1').max(10,'Maximum Rating should be 10').typeError(\"Must be a number\"),\n\n  });\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    },\n    reset\n  } = useForm({\n    resolver: yupResolver(schema)\n  });\n\n  const onSubmit = d => {\n    console.log('on submit', categoryInput);\n    const result = { ...d,\n      category_name: categoryInput,\n      subcategory_name: subCategoryInput,\n      category_id: categoryId,\n      subcategory_id: subcategoryId,\n      image: fileImage[0]\n    };\n    console.log('resultt', result); // if(result.category_name !=='' && result.category_id<=0){\n    //   let service = new FormData();\n    //   service.append('user_id',localStorage.getItem(\"USER-ID\"));\n    //   service.append('category_name',categoryInput);\n    //   service.append('subcategory_name',subCategoryInput);\n    //   service.append('image',fileImage[0]);\n    //   service.append('title',d.title);\n    //   service.append('description',d.description);\n    //   service.append('price',d.price);\n    //   dispatch(createService(service));\n    // }\n    // else if(result.category_id>0 && result.subcategory_name !==''){\n    //     console.log('send category_id and subcategory_name');\n    //     let service = new FormData();\n    //     service.append('user_id',localStorage.getItem(\"USER-ID\"));\n    //     service.append('category_id',categoryId);\n    //     service.append('subcategory_name',subCategoryInput);\n    //     service.append('image',fileImage[0]);\n    //     service.append('title',d.title);\n    //     service.append('description',d.description);\n    //     service.append('price',d.price);\n    //     dispatch(createService(service));\n    // }\n    // else\n    // {\n    //   console.log('send subcategory_id');\n    //   let service = new FormData();\n    //   service.append('user_id',localStorage.getItem(\"USER-ID\"));\n    //   service.append('subcategory_id',subcategoryId);\n    //   service.append('image',fileImage[0]);\n    //   service.append('title',d.title);\n    //   service.append('description',d.description);\n    //   service.append('price',d.price);\n    //   dispatch(createService(service));\n    // }\n\n    reset();\n  };\n\n  useEffect(() => {\n    dispatch(fetchAllCategoryUser());\n  }, [dispatch]);\n\n  const handleChangePicture = async e => {\n    const files = e.target.files;\n    var filesArray = [].slice.call(files);\n    SetfileImage(e.target.files);\n    await filesArray.forEach(e => {\n      SetnameOfPicture(e.name);\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(Select, {\n      isDisabled: categoryInput !== '',\n      defaultValue: categoryId,\n      onChange: event => {\n        if (event.target.value > 0) {\n          setCategoryId(event.target.value);\n          SetdisabledCategory(false);\n          dispatch(fetchSubcategoryByCategoryID(event.target.value));\n        } else {\n          setCategoryId(0);\n          dispatch(emptySubcategory());\n          SetdisabledCategory(true);\n          SetdisabledSubCategory(true);\n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: 0,\n        children: \" -- Select Category -- \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 136,\n        columnNumber: 7\n      }, this), categoryUserDataUser && categoryUserDataUser.length > 0 && categoryUserDataUser.map(category => category.status_category === 0 ? /*#__PURE__*/_jsxDEV(\"option\", {\n        value: category.id,\n        children: [\" \", '(Pending) ' + category.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 38\n      }, this) : /*#__PURE__*/_jsxDEV(\"option\", {\n        value: category.id,\n        children: [\" \", category.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 140,\n        columnNumber: 7\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(Select, {\n      isDisabled: disabledCategory && subCategoryInput !== '',\n      defaultValue: categoryId,\n      onChange: event => {\n        if (event.target.value > 0 && disabledCategory === false) {\n          setSubCategoryId(event.target.value);\n          SetdisabledSubCategory(false);\n        } else {\n          SetdisabledSubCategory(true); // SetdisabledCategory(false);       \n        }\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"option\", {\n        value: 0,\n        children: \" -- Select SubCategory -- \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 161,\n        columnNumber: 7\n      }, this), fetchSubCategoryDataUser && fetchSubCategoryDataUser.length > 0 && fetchSubCategoryDataUser.map(subcategory => subcategory.status_subcategory === 0 ? /*#__PURE__*/_jsxDEV(\"option\", {\n        value: subcategory.id,\n        children: [\" \", '(Pending) ' + subcategory.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 44\n      }, this) : /*#__PURE__*/_jsxDEV(\"option\", {\n        value: subcategory.id,\n        children: [\" \", subcategory.name]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 7\n      }, this))]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 145,\n      columnNumber: 5\n    }, this), console.log('createServiceError', createServiceError), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit(onSubmit),\n      children: [/*#__PURE__*/_jsxDEV(Row, {\n        children: [/*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col25, {\n            children: /*#__PURE__*/_jsxDEV(LabelForm, {\n              children: \"Category\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 175,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col25, {\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              isDisabled: !disabledCategory,\n              onChange: event => {\n                SetCategoryInput(event.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: (_errors$category = errors.category) === null || _errors$category === void 0 ? void 0 : _errors$category.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 182,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: createServiceError && createServiceError.category\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 174,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col25, {\n            children: /*#__PURE__*/_jsxDEV(LabelForm, {\n              children: \"SubCategory\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col25, {\n            children: [/*#__PURE__*/_jsxDEV(Input, {\n              isDisabled: !disabledSubCategory,\n              onChange: event => {\n                SetSubCategoryInput(event.target.value);\n              }\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 194,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: (_errors$subcategory = errors.subcategory) === null || _errors$subcategory === void 0 ? void 0 : _errors$subcategory.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 198,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: createServiceError && createServiceError.subcategory\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 199,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 192,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 188,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col25, {\n            children: /*#__PURE__*/_jsxDEV(LabelForm, {\n              children: \"Title\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col25, {\n            children: [/*#__PURE__*/_jsxDEV(InputFormTxt, { ...register(\"title\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 209,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: (_errors$title = errors.title) === null || _errors$title === void 0 ? void 0 : _errors$title.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 210,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: createServiceError && createServiceError.title\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 211,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 204,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Row, {\n          children: [/*#__PURE__*/_jsxDEV(Col25, {\n            children: /*#__PURE__*/_jsxDEV(LabelForm, {\n              children: \"Price\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 9\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 217,\n            columnNumber: 7\n          }, this), /*#__PURE__*/_jsxDEV(Col25, {\n            children: [/*#__PURE__*/_jsxDEV(InputFormTxt, { ...register(\"price\")\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 221,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: (_errors$price = errors.price) === null || _errors$price === void 0 ? void 0 : _errors$price.message\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 222,\n              columnNumber: 9\n            }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n              children: createServiceError && createServiceError.errors && createServiceError.errors.price\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 223,\n              columnNumber: 12\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 220,\n            columnNumber: 7\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 216,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(Col25, {\n          children: /*#__PURE__*/_jsxDEV(LabelForm, {\n            children: \"Description\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(Col25, {\n          children: [/*#__PURE__*/_jsxDEV(TextareaForm, { ...register(\"description\")\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 232,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {\n            children: (_errors$description = errors.description) === null || _errors$description === void 0 ? void 0 : _errors$description.message\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 233,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(ErrorPForm, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 235,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 231,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 173,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        className: \"newUserImage\",\n        children: [/*#__PURE__*/_jsxDEV(Col25, {\n          children: /*#__PURE__*/_jsxDEV(LabelForm, {\n            children: \"Upload a Service Picture\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 243,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 242,\n          columnNumber: 10\n        }, this), /*#__PURE__*/_jsxDEV(Col25, {\n          children: /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            className: \"newUserImage\",\n            name: \"file\",\n            id: \"img\",\n            onChange: event => {\n              handleChangePicture(event);\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 241,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(Row, {\n        children: /*#__PURE__*/_jsxDEV(InputFormSub, {\n          type: \"submit\",\n          value: \"Create Service\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 250,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 117,\n    columnNumber: 9\n  }, this);\n}\n\n_s(AddService, \"ZImqmnF09WqoEiuQZwKPHZmI+j4=\", false, function () {\n  return [useDispatch, useSelector, useSelector, useSelector, useForm];\n});\n\n_c = AddService;\n\nvar _c;\n\n$RefreshReg$(_c, \"AddService\");","map":{"version":3,"sources":["/Users/chrishar/Documents/CODI/Final Project/Siverr/frontend/src/pages/User/AddService/AddService.js"],"names":["React","useState","useEffect","useDispatch","useSelector","useForm","yupResolver","yup","Container","Row","Col25","InputFormTxt","LabelForm","InputFormSub","ErrorPForm","TextareaForm","Input","fetchAllCategoryUser","fetchSubcategoryByCategoryID","createService","emptySubcategory","Select","AddService","dispatch","categoryUserDataUser","errorCategoryUser","state","fetchAllCategoryUserReducer","fetchSubCategoryDataUser","fetchSubCategoryDataUsererror","fetchAllSubCategoryByCategoryIDUserReducer","postService","createServiceError","createServiceReducer","categoryId","setCategoryId","subcategoryId","setSubCategoryId","subCategoryInput","SetSubCategoryInput","categoryInput","SetCategoryInput","disabledCategory","SetdisabledCategory","disabledSubCategory","SetdisabledSubCategory","fileImage","SetfileImage","nameOfPicture","SetnameOfPicture","schema","object","shape","title","string","required","category","subcategory","price","description","register","handleSubmit","formState","errors","reset","resolver","onSubmit","d","console","log","result","category_name","subcategory_name","category_id","subcategory_id","image","handleChangePicture","e","files","target","filesArray","slice","call","forEach","name","event","value","length","map","status_category","id","status_subcategory","message"],"mappings":"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","sourcesContent":["import React,{useState,useEffect} from 'react';\nimport { useDispatch, useSelector } from 'react-redux';\nimport {useForm} from 'react-hook-form';\nimport { yupResolver } from '@hookform/resolvers/yup';\nimport * as yup from 'yup';\nimport { Container,Row,Col25,InputFormTxt,LabelForm,InputFormSub,ErrorPForm, TextareaForm } from '../../../components/styled/Form.style'\nimport 'react-dropdown/style.css';\nimport Input from '../../../components/Input';\nimport { fetchAllCategoryUser,fetchSubcategoryByCategoryID,createService ,emptySubcategory} from '../../../redux/action-creators';\nimport Select from \"../../../components/Select\"\n\nexport default function AddService() {\n\n   \n\n        const dispatch = useDispatch();\n        \n        const  { categoryUserDataUser, errorCategoryUser } = useSelector((state) =>  state.fetchAllCategoryUserReducer);\n        const  { fetchSubCategoryDataUser, fetchSubCategoryDataUsererror } = useSelector((state) =>  state.fetchAllSubCategoryByCategoryIDUserReducer);\n        const  { postService, createServiceError } = useSelector((state) =>  state.createServiceReducer);\n        const [categoryId, setCategoryId] = useState(0);\n        const [subcategoryId, setSubCategoryId] = useState(0);\n        const [subCategoryInput,SetSubCategoryInput]=useState('');\n        const [categoryInput,SetCategoryInput]=useState('');\n        const [disabledCategory,SetdisabledCategory] = useState(true);\n        const [disabledSubCategory,SetdisabledSubCategory] = useState(true);\n        const [fileImage,SetfileImage] = useState([]);\n        const [nameOfPicture,SetnameOfPicture] = useState([]);\n        const schema = yup.object().shape({\n          title: yup.string().required(),\n          category:yup.string(),\n          subcategory:yup.string(),\n          price:yup.string().required(),\n          description: yup.string().required()\n        //   year: yup.number().min(1000,'Minimum Year should be 1000').max(9999,'Maximum Year should be 9999').typeError(\"Must be a number\"),\n        //   rating: yup.number().min(1,'Minimum Rating should be 1').max(10,'Maximum Rating should be 10').typeError(\"Must be a number\"),\n       \n        });\n\n        const {\n            register,\n            handleSubmit,\n            formState: { errors },\n            reset,\n          } = useForm({ resolver: yupResolver(schema) });\n        \n             \n          const onSubmit = (d) =>{\n            console.log('on submit',categoryInput);\n            const result = {\n              ...d,\n              category_name:categoryInput,\n              subcategory_name:subCategoryInput,\n              category_id:categoryId,\n              subcategory_id: subcategoryId,\n              image:fileImage[0],    \n            };\n            console.log('resultt',result)\n            // if(result.category_name !=='' && result.category_id<=0){\n            //   let service = new FormData();\n            //   service.append('user_id',localStorage.getItem(\"USER-ID\"));\n            //   service.append('category_name',categoryInput);\n            //   service.append('subcategory_name',subCategoryInput);\n            //   service.append('image',fileImage[0]);\n            //   service.append('title',d.title);\n            //   service.append('description',d.description);\n            //   service.append('price',d.price);\n        \n            //   dispatch(createService(service));\n          \n            // }\n            // else if(result.category_id>0 && result.subcategory_name !==''){\n            //     console.log('send category_id and subcategory_name');\n            //     let service = new FormData();\n            //     service.append('user_id',localStorage.getItem(\"USER-ID\"));\n            //     service.append('category_id',categoryId);\n            //     service.append('subcategory_name',subCategoryInput);\n            //     service.append('image',fileImage[0]);\n            //     service.append('title',d.title);\n            //     service.append('description',d.description);\n            //     service.append('price',d.price);\n             \n            //     dispatch(createService(service));\n            // }\n            // else\n            // {\n            \n            //   console.log('send subcategory_id');\n            //   let service = new FormData();\n            //   service.append('user_id',localStorage.getItem(\"USER-ID\"));\n            //   service.append('subcategory_id',subcategoryId);\n            //   service.append('image',fileImage[0]);\n            //   service.append('title',d.title);\n            //   service.append('description',d.description);\n            //   service.append('price',d.price);\n            //   dispatch(createService(service));\n            // }\n           \n             reset();  \n          }\n       \n          useEffect(() => {\n            dispatch(fetchAllCategoryUser())\n          \n          }, [dispatch]);\n          const handleChangePicture = async e => {\n            const files = e.target.files;\n            var filesArray = [].slice.call(files);\n            SetfileImage(e.target.files);\n       \n            await   filesArray.forEach(e => {\n              SetnameOfPicture(e.name);\n            });\n          }\n       \n    return (\n        <Container>\n    \n\n            <Select  \n            isDisabled={categoryInput  !==''}\n            defaultValue={categoryId}\n            onChange={(event) => {     \n             if(event.target.value>0 ) {\n              setCategoryId(event.target.value);\n              SetdisabledCategory(false);\n              dispatch(fetchSubcategoryByCategoryID(event.target.value));\n             }\n             else{\n              setCategoryId(0);\n              dispatch(emptySubcategory())\n              SetdisabledCategory(true);   \n              SetdisabledSubCategory(true);      \n             }\n            }}>        \n      <option value={0}> -- Select Category -- </option>     \n      {categoryUserDataUser && categoryUserDataUser.length>0 && categoryUserDataUser.map((category) =>\n       category.status_category===0 ?<option value={category.id}> {'(Pending) '+category.name}</option>\n          :\n      <option value={category.id}> {category.name}</option>\n    \n    )}\n    </Select>\n\n    <Select \n            isDisabled={disabledCategory && subCategoryInput  !==''}\n            defaultValue={categoryId}\n            onChange={(event) => {\n            \n              if(event.target.value>0 &&disabledCategory===false){\n                setSubCategoryId(event.target.value) \n                SetdisabledSubCategory(false)\n              }\n              else{\n                SetdisabledSubCategory(true);\n                // SetdisabledCategory(false);       \n              }\n             \n            }}>   \n        \n      <option value={0}> -- Select SubCategory -- </option>\n          \n      {fetchSubCategoryDataUser && fetchSubCategoryDataUser.length>0 && fetchSubCategoryDataUser.map((subcategory) =>\n       subcategory.status_subcategory===0 ?<option value={subcategory.id}> {'(Pending) '+subcategory.name}</option>\n          :\n      <option value={subcategory.id}> {subcategory.name}</option>\n    \n    )}\n    </Select>\n\n{console.log('createServiceError',createServiceError)}\n  <form onSubmit={handleSubmit(onSubmit)}>\n    <Row>\n    <Row>\n      <Col25>\n        <LabelForm >Category</LabelForm>\n      </Col25>\n      <Col25>\n        <Input  isDisabled={!disabledCategory } onChange={(event)=>{\n          SetCategoryInput(event.target.value)\n        }}/>\n        <ErrorPForm>{errors.category?.message}</ErrorPForm>\n           <ErrorPForm> \n           {createServiceError &&  createServiceError.category }\n           </ErrorPForm>\n      </Col25>\n    </Row>\n    <Row>\n      <Col25>\n        <LabelForm >SubCategory</LabelForm>\n      </Col25>\n      <Col25>\n    \n        <Input isDisabled={!disabledSubCategory}  onChange={(event)=>{\n            SetSubCategoryInput(event.target.value)\n        }}/>\n      \n        <ErrorPForm>{errors.subcategory?.message}</ErrorPForm>\n           <ErrorPForm> \n           {createServiceError&& createServiceError.subcategory }\n           </ErrorPForm>\n      </Col25>\n    </Row>\n    <Row>\n      <Col25>\n        <LabelForm >Title</LabelForm>\n      </Col25>\n      <Col25>\n        <InputFormTxt {...register(\"title\")}/>\n        <ErrorPForm>{errors.title?.message}</ErrorPForm>\n           <ErrorPForm> \n           {createServiceError&& createServiceError.title }\n           </ErrorPForm>\n      </Col25>\n    </Row>\n    <Row>\n      <Col25>\n        <LabelForm >Price</LabelForm>\n      </Col25>\n      <Col25>\n        <InputFormTxt {...register(\"price\")}/>\n        <ErrorPForm>{errors.price?.message}</ErrorPForm>\n           <ErrorPForm> \n           {createServiceError && createServiceError.errors && createServiceError.errors.price }\n           </ErrorPForm>\n      </Col25>\n    </Row>\n      <Col25>\n        <LabelForm >Description</LabelForm>\n      </Col25>\n      <Col25>\n        <TextareaForm {...register(\"description\")} ></TextareaForm>\n        <ErrorPForm>{errors.description?.message}</ErrorPForm>\n      \n           <ErrorPForm> \n           \n           </ErrorPForm>    \n        \n      </Col25>\n    </Row>\n    <Row className=\"newUserImage\">\n         <Col25>\n            <LabelForm>Upload a Service Picture</LabelForm>\n            </Col25>\n            <Col25>\n            <input type=\"file\" className=\"newUserImage\" name=\"file\" id=\"img\"\n                   onChange={ (event ) =>{handleChangePicture(event)}}/>\n            </Col25>\n          </Row>\n    <Row>\n      <InputFormSub  type='submit' value='Create Service'/>\n    </Row>\n  </form>\n</Container>\n    )\n}\n"]},"metadata":{},"sourceType":"module"}